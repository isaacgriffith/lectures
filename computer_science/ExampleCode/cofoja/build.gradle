/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.8.1/samples
 */

plugins {
  id 'java'
}

repositories {
  mavenCentral()
}

configurations {
  cofoja
}

dependencies {
  cofoja group: 'org.huoc', name: 'cofoja', version: '1.3.1'
  compile configurations.cofoja.dependencies
  testImplementation "org.junit.jupiter:junit-jupiter-engine:5.5.2"
  testRuntime "org.junit.platform:junit-platform-runner:1.5.2"
  testRuntime "org.junit.platform:junit-platform-console:1.5.2"
}

test {
  useJUnitPlatform()
}

task runJupiter(type: JavaExec) {
  println("Configuration: " + configurations.cofoja.files[0])
  jvmArgs '-ea'
  jvmArgs '-javaagent:' + configurations.cofoja.files[0]
  classpath = project.sourceSets.test.runtimeClasspath
  main 'org.junit.platform.console.ConsoleLauncher'
  args '--scan-class-path'
  args '--hide-details'
  args "--reports-dir=$project.testReportDir"
}

test.dependsOn runJupiter
